<div *ngIf="loaded;else progress">
  <div class="d-flex justify-content-center align-items-center flex-lg-row flex-column mx-auto px-3 mt-3 gap-3">


    <p-dropdown [options]="suras" [optionLabel]="'surahName'" class="w-100" styleClass="w-100" [(ngModel)]="currentSurah" placeholder="Select a Surah" (onChange)="helper.SurahNumberRestrict(GetCurrentSurahNumber(),start,end)" [dropdownIcon]="'pi pi-book'" [optionValue]="'surahName'" [filter]="true" ></p-dropdown>
    <p-dropdown [options]="reciters" [optionLabel]="'name'" class="w-100" styleClass="w-100" [(ngModel)]="currentReciterId" placeholder="Select a Reciter" [dropdownIcon]="'pi pi-user'" [optionValue]="'id'"  ></p-dropdown>

    <div class="p-inputgroup">
      <span class="p-inputgroup-addon">
        <i class="pi pi-play"></i>
    </span>
      <input #start type="number" [min]="1" (input)="helper.InputNumberRestrict(start)" pInputText placeholder="Start Ayah" />
    </div>
    <div class="p-inputgroup">
      <span class="p-inputgroup-addon">
        <i class="pi pi-circle-on"></i>
      </span>
      <input #end type="number" [min]="1" (input)="helper.InputNumberRestrict(end)" pInputText placeholder="End Ayah" />
    </div>



    <div class="p-inputgroup w-auto">

      <p-button label="Generate" [disabled]="currentReciterId == '' || currentSurah == '' || !start.value || !end.value" [icon]="'pi pi-bolt'"  [rounded]="true" severity="secondary"  (onClick)="GetAyahsAndLoadThem(GetCurrentSurahNumber(),currentReciterId,start.value,end.value)"></p-button>
    </div>
  </div>


  <div *ngIf="(loadedAudio || firstLoad) && !ffmpegExecuting;" class="d-flex justify-content-center my-5 align-items-center">

    <video *ngIf="videoURL != ''" [src]="videoURL" width="500px" height="800px" autoplay controls></video>

  </div>

</div>
<ng-template #progress>
  <div class="d-flex justify-content-center align-items-center" style="height: 85dvh;width: 100dvw;">

    <div class="mx-auto w-50">
      <span>Loading {{currentLoading?.name}}</span>
      <p-toast></p-toast>
      <p-progressBar [value]="currentLoading?.value"></p-progressBar>
  </div>
  </div>
</ng-template>


<div *ngIf="ffmpegExecuting" class="d-flex justify-content-center my-5 align-items-center" style="width: 100dvw;">

  <div class="mx-auto w-50">
    <span>Generating Video..</span>
    <p-toast></p-toast>
    <p-progressBar [value]="executingProgress"></p-progressBar>
</div>
</div>
